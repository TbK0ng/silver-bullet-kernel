{
  "telemetry": {
    "defaultVerifyRunsPath": ".metrics/verify-runs.jsonl",
    "ciVerifyRunsPath": ".metrics/verify-runs-ci.jsonl",
    "memoryContextAuditPath": ".metrics/memory-context-audit.jsonl"
  },
  "workflowGate": {
    "requireActiveChangeForImplementationEdits": true,
    "requireSingleActiveChangeForImplementationEdits": true,
    "requireCompleteActiveChangeArtifacts": true,
    "requireBranchPatternForImplementationEdits": true,
    "requireBranchChangeMatchesActiveChange": true,
    "branchPattern": "^sbk-(?<owner>[a-z0-9]+)-(?<change>[a-z0-9][a-z0-9-]*)$",
    "requireLinkedWorktreeForLocalImplementation": true,
    "linkedWorktreeGitDirContains": "/.git/worktrees/",
    "requireChangeArtifactsInBranchDelta": true,
    "requireSessionRecordInBranchDelta": true,
    "requireOwnerScopedSessionEvidence": true,
    "ownerWorkspaceRoot": ".trellis/workspace/",
    "ciRequireResolvableBaseRef": true,
    "requiredTaskEvidenceColumns": [
      "Files",
      "Action",
      "Verify",
      "Done"
    ],
    "requiredTaskEvidenceHeading": "Task Evidence",
    "requireNonEmptyTaskEvidenceRows": true,
    "taskEvidenceGranularity": {
      "maxFilesPerTaskRow": 4,
      "maxActionLength": 220
    },
    "requireSessionDisclosureMetadata": true,
    "requiredSessionDisclosureMarkers": [
      "Memory Sources",
      "Disclosure Level",
      "Source IDs"
    ],
    "implementationPathPrefixes": [
      "src/",
      "tests/",
      "scripts/",
      ".trellis/",
      ".codex/",
      ".claude/",
      ".github/workflows/",
      "openspec/specs/"
    ],
    "implementationPathFiles": [
      "AGENTS.md",
      "CLAUDE.md",
      "README.md",
      "package.json",
      "package-lock.json",
      "tsconfig.json",
      "eslint.config.js"
    ],
    "ignorePathPrefixes": [
      ".metrics/"
    ]
  },
  "securityGate": {
    "enabled": true,
    "denySensitivePathEdits": true,
    "sensitivePathRegexes": [
      "(^|/)\\.env(\\.|$|/)",
      "(^|/)\\.npmrc$",
      "(^|/)(id_rsa|id_ed25519)(\\.pub)?$",
      "(^|/).+\\.(pem|p12|pfx|key)$",
      "(^|/)secrets?(/|$)",
      "(^|/)(credential|credentials)(/|$)"
    ],
    "scanDurableArtifactsForSecrets": true,
    "durableArtifactPathPrefixes": [
      ".trellis/workspace/",
      "openspec/",
      "docs/"
    ],
    "secretScanIgnorePathPrefixes": [
      "openspec/changes/archive/"
    ],
    "secretRegexes": [
      "(?i)AKIA[0-9A-Z]{16}",
      "(?i)ghp_[A-Za-z0-9]{36}",
      "(?i)AIza[0-9A-Za-z\\-_]{35}",
      "(?i)-----BEGIN (RSA|OPENSSH|EC|DSA|PGP) PRIVATE KEY-----",
      "(?i)(token|api[-_ ]?key|password|secret)\\s*[:=]\\s*['\\\"][A-Za-z0-9_\\-\\/+=]{8,}['\\\"]"
    ]
  },
  "orchestratorGate": {
    "enabled": true,
    "dispatchAgentPaths": [
      ".claude/agents/dispatch.md"
    ],
    "forbiddenTools": [
      "Write",
      "Edit",
      "MultiEdit"
    ]
  },
  "indicatorGate": {
    "maxFailureRateLast7Days": 5,
    "maxLeadTimeHoursP90": 72,
    "maxReworkCountLast7Days": 2,
    "maxActiveChanges": 3,
    "maxSpecDriftEventsLast30Days": 1,
    "requireTokenCostAvailable": false
  }
}
